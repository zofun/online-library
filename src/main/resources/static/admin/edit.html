<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>新建内容</title>
    <link rel="stylesheet" href="../libs/layui/css/layui.css">
    <link rel="stylesheet" href="../css/overview.css">
    <link rel="stylesheet" href="../libs/editor.md/css/editormd.css">
</head>
<body class="layui-layout-body" style="background-color: #f2f2f2">

<div class="layui-card admin-header">
    <div class="layui-breadcrumb" lay-fiter="breadcrumb" style="visibility: visible;margin-left: 20px">
        <a href="#">主页</a>
        <span lay-separator="-"></span>
        <a href="#">新建内容</a>
    </div>
</div>

<!--头部按钮栏-->
<div class="layui-row layui-form" style="margin-left: 10px;margin-top: 10px">
    <div class="layui-col-lg3 layui-inline">

        <label for="" class="layui-form-label">所属栏目</label>
        <div class="layui-input-inline">
            <select id="classify" lay-verify="required">
                <option value="">请选择</option>
                <option value="0">通知公告</option>
                <option value="1">利用指南</option>
                <option value="2">常用指南</option>
                <option value="3">规章制度</option>
                <option value="4">读者服务</option>
            </select>
        </div>
    </div>
    <div class="layui-col-lg4 layui-inline">

        <label for="" class="layui-form-label">标题</label>
        <div class="layui-input-inline">
            <input type="text" class="layui-input" id="title" placeholder="请输入标题" maxlength="30" style="width: 300px">
        </div>

    </div>
    <div class="layui-col-lg2 layui-inline">

        <label for="" class="layui-form-label">推荐状态</label>
        <div class="layui-input-inline">
            <input type="checkbox" id="recommend" lay-skin="switch" lay-text="ON|OFF" checked>
        </div>
    </div>

    <div class="layui-col-lg1">
        <button class="layui-btn" onclick="submit()">立即发布</button>
    </div>


</div>


<!--markdown编辑器-->
<div class="layui-row" style="height: 700px;margin-top: 20px;margin-left: 10px;margin-right: 10px ">
    <div class="layui-col-lg12" id="editor" style="">
        <textarea style="display:none;"></textarea>
    </div>
</div>

</body>
<script src="../libs/jquery/jquery.js"></script>
<script src="../libs/layui/layui.js"></script>
<script src="../libs/editor.md/editormd.js"></script>
<script src="../js/common.js"></script>
<!--layui相关-->
<script>
    layui.use(['element','table','form'], function() {
        var element = layui.element;
        var form=layui.form;
    });
</script>


<!--editor.md相关脚本-->
<script>
    var myeditor;
    $(function() {
         myeditor = editormd("editor", {
             width: "100%",
            height: "100%",
            // markdown: "xxxx",     // dynamic set Markdown text
            path : "../libs/editor.md//lib/",  // Autoload modules mode, codemirror, marked... dependents libs path
            htmlDecode : "style,script,iframe|on*", //开启html解析
            emoji : true,
            taskList : true,
            tex : true,                   // 开启科学公式TeX语言支持，默认关闭
            flowChart : true,             // 开启流程图支持，默认关闭
            sequenceDiagram : true, //开启序列图支持
             saveHTMLToTextarea : true

        });
    });
</script>
<!--事件处理相关脚本-->
<script>
    function submit() {

        var classify=$('#classify').val();
        var title=$('#title').val();
        var recommend=$('em').text();
        var html=myeditor.getHTML();
        var markdown=myeditor.getMarkdown();


        console.log(markdown);
        alert("分类"+classify+"标题=="+title+"推荐状态=="+recommend+"html=="+html+"markdown=="+markdown);


    }
</script>
</html>